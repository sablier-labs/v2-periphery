// SPDX-License-Identifier: GPL-3.0-or-later
// solhint-disable max-line-length,no-inline-assembly,reason-string
pragma solidity >=0.8.19;

import { IAllowanceTransfer } from "@uniswap/permit2/interfaces/IAllowanceTransfer.sol";

import { ISablierV2Archive } from "../../src/interfaces/ISablierV2Archive.sol";
import { ISablierV2ProxyPlugin } from "../../src/interfaces/ISablierV2ProxyPlugin.sol";
import { ISablierV2ProxyTarget } from "../../src/interfaces/ISablierV2ProxyTarget.sol";

contract Precompiles {
    /*//////////////////////////////////////////////////////////////////////////
                                     BYTECODES
    //////////////////////////////////////////////////////////////////////////*/

    bytes public constant BYTECODE_ARCHIVE =
        hex"60803461007457601f61047538819003918201601f19168301916001600160401b038311848410176100795780849260209460405283398101031261007457516001600160a01b0381169081900361007457600080546001600160a01b0319169190911790556040516103e590816100908239f35b600080fd5b634e487b7160e01b600052604160045260246000fdfe608060408181526004918236101561001657600080fd5b600092833560e01c91826375829def146102e657508163bb032a661461022b578163bde3672d1461011c578163f794062e146100af575063f851a4401461005c57600080fd5b346100ab57817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126100ab5773ffffffffffffffffffffffffffffffffffffffff60209254169051908152f35b5080fd5b9050346101185760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610118573573ffffffffffffffffffffffffffffffffffffffff811680910361011857818360ff92602095526001855220541690519015158152f35b8280fd5b919050346101185760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101185781359173ffffffffffffffffffffffffffffffffffffffff808416809403610227578454163381036101d4575050818352600160205282207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff008154169055337fb9835cd339eaf06fa84e93033cbaef0efbd524b078bf101a5a73040c8e1a3a6b8380a380f35b82517fc6cce6a400000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff9091169181019182523360208301529081906040010390fd5b8480fd5b919050346101185760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101185781359173ffffffffffffffffffffffffffffffffffffffff808416809403610227578454163381036101d45750508183526001602052822060017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00825416179055337fb9b4b5889ee1c30795c18ef5221a2a05de69d5655670bd5db987bbecc1b9646b8380a380f35b8491346101185760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101185780359173ffffffffffffffffffffffffffffffffffffffff91828416809403610227578454928316338103610397575050507fffffffffffffffffffffffff00000000000000000000000000000000000000001681178255337fbdd36143ee09de60bdefca70680e0f71189b2ed7acee364b53917ad433fdaf808380a380f35b7fc6cce6a400000000000000000000000000000000000000000000000000000000835273ffffffffffffffffffffffffffffffffffffffff1690820190815233602082015281906040010390fd";
    bytes public constant BYTECODE_PROXY_PLUGIN =
        hex"60c03461007d57601f61096f38819003918201601f19168301916001600160401b038311848410176100825780849260209460405283398101031261007d57516001600160a01b038116810361007d573060805260a0526040516108d6908161009982396080518160c6015260a05181818161012201526106b70152f35b600080fd5b634e487b7160e01b600052604160045260246000fdfe608060408181526004908136101561001657600080fd5b600092833560e01c90816302a214601461066d575080636aeb459414610571576372eba2031461004557600080fd5b3461056d5760807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261056d578135602491823573ffffffffffffffffffffffffffffffffffffffff908181160361056957604435926fffffffffffffffffffffffffffffffff808516809503610485576064359081160361056557817f000000000000000000000000000000000000000000000000000000000000000016301461053d578251937ff794062e0000000000000000000000000000000000000000000000000000000085523387860152602094858188818c887f0000000000000000000000000000000000000000000000000000000000000000165af190811561044a578991610510575b50156104e25783517fb971302a000000000000000000000000000000000000000000000000000000008152828882015285818881335afa90811561044a5789916104c5575b50833091160361049a578351917feac8f5b80000000000000000000000000000000000000000000000000000000083528783015284828781335afa918215610490578892610454575b5083517f8da5cb5b00000000000000000000000000000000000000000000000000000000815285818981305afa90811561044a57899161041d575b5084519184878401927fa9059cbb0000000000000000000000000000000000000000000000000000000084521688840152604483015260448252608082019367ffffffffffffffff93838610858711176103f257858752169189918291610281876106df565b8887527f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c656460a0820152519082855af1903d156103e3573d9283116103b857906103079392918551926102fa887fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f840116018561072a565b83523d8a8885013e6107b4565b8051908382159283156103a0575b50505015610321578480f35b517f08c379a000000000000000000000000000000000000000000000000000000000815292830152602a908201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e60448201527f6f742073756363656564000000000000000000000000000000000000000000006064820152608490fd5b6103b0935082018101910161076b565b388381610315565b868960418a7f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b906103079392506060916107b4565b888b60418c7f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b61043d9150863d8811610443575b610435818361072a565b810190610788565b3861021b565b503d61042b565b85513d8b823e3d90fd5b9091508481813d8311610489575b61046c818361072a565b81010312610485575182811681036104855790386101e0565b8780fd5b503d610462565b84513d8a823e3d90fd5b85886001897f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b6104dc9150863d881161044357610435818361072a565b38610197565b83517f09bd4d6800000000000000000000000000000000000000000000000000000000815233818901528690fd5b6105309150863d8811610536575b610528818361072a565b81019061076b565b38610152565b503d61051e565b8583517fbbff6135000000000000000000000000000000000000000000000000000000008152fd5b8680fd5b8580fd5b8280fd5b50903461056d57827ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261056d5781516105ac816106df565b6001938482526020908183019382368637835115610641575091907f72eba20300000000000000000000000000000000000000000000000000000000849694528451948186019282875251809352850195925b82811061060c5785870386f35b83517fffffffff00000000000000000000000000000000000000000000000000000000168752958101959281019284016105ff565b9060326024927f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b8490346106db57817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126106db5760209073ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b5080fd5b6040810190811067ffffffffffffffff8211176106fb57604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff8211176106fb57604052565b90816020910312610783575180151581036107835790565b600080fd5b90816020910312610783575173ffffffffffffffffffffffffffffffffffffffff811681036107835790565b9192901561082f57508151156107c8575090565b3b156107d15790565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152fd5b8251909150156108425750805190602001fd5b604051907f08c379a000000000000000000000000000000000000000000000000000000000825281602080600483015282519283602484015260005b8481106108bf575050507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f836000604480968601015201168101030190fd5b81810183015186820160440152859350820161087e56";
    bytes public constant BYTECODE_PROXY_TARGET =
        hex"60c0346200007d57601f620045c138819003918201601f19168301916001600160401b0383118484101762000082578084926020946040528339810103126200007d57516001600160a01b03811681036200007d573060805260a0526040516145289081620000998239608051816144d6015260a051816142d00152f35b600080fd5b634e487b7160e01b600052604160045260246000fdfe608080604052600436101561001357600080fd5b600090813560e01c90816310fad8c814612c90575080631d165efc14612b0457806339532c19146128b557806351c9b6f11461284e57806361ea5802146125735780636a09d49a14612488578063868699c5146122fb57806386f2891e1461228357806389222119146120ba5780638ad7937414611e7f57806390e2cd7914611cc257806398590ef914611acd5780639dc29fac14611a52578063a3143b76146119d9578063a4af60d214611663578063ad26c0fb146115d8578063b956b45f1461152d578063c00b86a514611251578063c0cb6a4014611098578063c426f89c14610e37578063ec5b900f14610c88578063f163061214610ae1578063f2bf799e1461099c578063f65e5d66146105bd5763fe5cacde1461013457600080fd5b3461051e5760031960a0813601126104885761014e612e83565b610156612e99565b9167ffffffffffffffff80606435116105b95761010082606435360301126105b9576084351161059c5760e090608435360301126105b5576101966144cc565b61019e6144cc565b604051927feac8f5b800000000000000000000000000000000000000000000000000000000845260243560048501526020846024816001600160a01b0386165afa9384156105a8578194610560575b50604051917f70a082310000000000000000000000000000000000000000000000000000000083523060048401526020836024816001600160a01b0389165afa92831561052157829361052c575b506001600160a01b0381163b1561048857816001600160a01b036024829360405194859384927f40e58ee500000000000000000000000000000000000000000000000000000000845284356004850152165af180156105215790829161050a575b50506040517f70a082310000000000000000000000000000000000000000000000000000000081523060048201526020816024816001600160a01b0389165afa9182156104fe57916104c3575b506103f3936103046001600160a01b039493610313936132db565b9061030d613fb2565b90613317565b61031b6144cc565b1660846064350161032b8161364d565b61041760648035016103616fffffffffffffffffffffffffffffffff936084356004019085610359856135f2565b1690886142b8565b6001600160a01b036040519687957fbf061d0a000000000000000000000000000000000000000000000000000000008752602060048801526101248701956103e860643560040195856103b388612f9c565b1660248b01526103c7602460643501613011565b151560448b0152856103dd604460643501612f9c565b1660648b0152612fcf565b166084880152612f9c565b1660a485015261040b60c4850160a4606435016137c5565b60e46064350190613ad5565b6101006101048501529182905261014483019160005b8181106104a057505050918160008160209503925af19081156104945760009161045d575b602082604051908152f35b6020813d60201161048c575b8161047660209383612f63565b81010312610488575190506020610452565b5080fd5b3d9150610469565b6040513d6000823e3d90fd5b91935091806104b160019286613b28565b6060809101940191019185939261042d565b9390506020843d6020116104f6575b816104df60209383612f63565b810103126104f15792516103046102e9565b600080fd5b3d91506104d2565b604051903d90823e3d90fd5b61051390612f17565b61051e57803861029c565b80fd5b6040513d84823e3d90fd5b9092506020813d602011610558575b8161054860209383612f63565b810103126104f15751913861023b565b3d915061053b565b9093506020813d6020116105a0575b8161057c60209383612f63565b8101031261059c57516001600160a01b038116810361059c5792386101ed565b8380fd5b3d915061056f565b50604051903d90823e3d90fd5b8280fd5b8480fd5b503461051e576003196101c081360112610488576105d9612e83565b906024908135926105e8612e99565b6101407fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9c360112610994576101a4359267ffffffffffffffff84116109985760e09084360301126109945761063b6144cc565b6106436144cc565b6001600160a01b03809216604051907feac8f5b800000000000000000000000000000000000000000000000000000000825286600483015260209687838881855afa9283156108f2578993610958575b508885841691604051937f70a0823100000000000000000000000000000000000000000000000000000000918286523060048701528b868c81885afa95861561094d57849661091a575b50813b1561059c5783918b839260405196879384927f40e58ee500000000000000000000000000000000000000000000000000000000845260048401525af19283156105a8578b936108fd575b5050886040518094819382523060048301525afa9081156108f2578596979899916108ba575b5061075f9291610304916132db565b6107676144cc565b169160c435828116918282036104f15760a435916fffffffffffffffffffffffffffffffff83168093036104f157826107a49260040191876142b8565b604051947f4bc78b730000000000000000000000000000000000000000000000000000000086526064358481168091036104f1576004870152608435908482168092036104f1578601526044850152606484015260e4358015158091036104f15760848401526101049081359064ffffffffff918281168091036104f15760a48601526101249283358381168091036104f15760c48701526101449283359081168091036104f15760e4870152610164359182168092036104f15786948694859360009385015261018435908401525af19081156104945760009161088d575b50604051908152f35b908282813d83116108b3575b6108a38183612f63565b8101031261051e57505138610884565b503d610899565b9450909190508784813d81116108eb575b6108d58183612f63565b810103126104f15792518493919061075f610750565b503d6108cb565b6040513d8b823e3d90fd5b61090991929350612f17565b6109165788908a3861072a565b8980fd5b8c809297508195503d8311610946575b6109348183612f63565b810103126104f1578b925194386106dd565b503d61092a565b6040513d86823e3d90fd5b9092508781813d831161098d575b6109708183612f63565b8101031261098957518481168103610989579138610693565b8880fd5b503d610966565b8580fd5b8680fd5b503461051e576003199060808236011261051e576109b8612e83565b9167ffffffffffffffff60243581811161059c576109da90369060040161311e565b9290916109e5612e99565b90606435908111610994576109fe90369060040161311e565b929096610a096144cc565b6001600160a01b0380911694853b15610add57610a5c9060409995949951977fa2ffb897000000000000000000000000000000000000000000000000000000008952606060048a0152606489019161329e565b9716602486015284870301604485015280865260208096019195855b828110610aa957868087818180890381838c5af1801561052157610a995750f35b610aa290612f17565b61051e5780f35b90919282806001926fffffffffffffffffffffffffffffffff610acb8c612fcf565b16815201980191019692919096610a78565b8780fd5b503461051e57604060031936011261051e5767ffffffffffffffff6004358181116105b557610b1490369060040161311e565b91602491823582811161099457610b2f90369060040161311e565b939092610b3a6144cc565b8515610c5e578690610b4c8686613ee4565b93825b888110610b655783610b62898989614031565b80f35b610b70818a8461322f565b356001600160a01b0381168091036105b957610b8d828b8561322f565b60209081810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe181360301821215610add5701803590868211610add578201928160051b36038413610add57803b15610add5788888094610c23604051978896879586947f8659c270000000000000000000000000000000000000000000000000000000008652600486015284019161329e565b03925af1908115610c53578591610c3f575b5050600101610b4f565b610c4890612f17565b61059c578338610c35565b6040513d87823e3d90fd5b60046040517f71594532000000000000000000000000000000000000000000000000000000008152fd5b506003199060408236011261051e57610c9f612e83565b916024359067ffffffffffffffff9081831161059c576101009083360301126105b55760405190610ccf82612eaf565b610cdb83600401612f9c565b8252610ce960248401613011565b9460209586840152610cfd60448501612f9c565b6040840152610d0e60648501612fcf565b9160608401928352610d2260848601612f9c565b9460808501958652610d373660a48301613030565b60a086015260e48101359182116109985701366023820112156109945792610dbc610df193879693610d748a97369060246004820135910161308c565b60c0850152610d816144cc565b6fffffffffffffffffffffffffffffffff9081341683526001600160a01b038091610dae82895116614110565b169551169151169084613d20565b6040519485809481937fbf061d0a00000000000000000000000000000000000000000000000000000000835260048301613878565b03925af19182156104fe5791610e0a5750604051908152f35b90508181813d8311610e30575b610e218183612f63565b810103126104f1575138610884565b503d610e17565b503461051e5760031960a08136011261048857610e52612e83565b9160243591610e5f612e99565b906064359267ffffffffffffffff9182851161048857610120818636030112610488576084359283116104885760e090833603011261051e57610ea06144cc565b610ea86144cc565b6001600160a01b0380961690604051957feac8f5b80000000000000000000000000000000000000000000000000000000087528060048801526020978888602481875afa97881561108d578398611055575b50871690604051937f70a0823100000000000000000000000000000000000000000000000000000000918286523060048701528a86602481875afa958615610c53578596611026575b50813b156105b95784916024839260405194859384927f40e58ee500000000000000000000000000000000000000000000000000000000845260048401525af1801561094d578a9291859161100d575b505060246040518094819382523060048301525afa9182156104fe5791610fdc575b5094610304610fc792610fd4976132db565b6004019160040190613b79565b604051908152f35b9590508686813d8311611006575b610ff48183612f63565b810103126104f1579451610304610fb5565b503d610fea565b61101991929350612f17565b6105b55788908338610f93565b9095508a81813d831161104e575b61103e8183612f63565b810103126104f157519438610f43565b503d611034565b9097508881813d8311611086575b61106d8183612f63565b810103126105b5575187811681036105b5579638610efa565b503d611063565b6040513d85823e3d90fd5b503461051e57600319906101808236011261051e576110b5612e83565b906101407fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdc36011261051e57610164359267ffffffffffffffff84116104885760e090843603011261051e575061110a6144cc565b6001600160a01b0380911660843592828416908185036104f157606435946fffffffffffffffffffffffffffffffff86168096036104f157856111519260040191856142b8565b604051937f4bc78b730000000000000000000000000000000000000000000000000000000085526024358481168091036104f15760048601526044358481168091036104f15760248601526044850152606484015260a4358015158091036104f157608484015260c4359164ffffffffff928381168091036104f15760a485015260e4358381168091036104f15760c48501526101049283359081168091036104f15760e48501526101249081359081168091036104f157600085938492602096840152610144938435908401525af19081156104945760009161123a57602082604051908152f35b6020813d821161048c578161047660209383612f63565b503461051e57608060031981813601126105b55761126d612e83565b611275612f86565b916044359067ffffffffffffffff94858311610998573660238401121561099857826004013591868311610add576024840193602436918560081b010111610add57606435968711610add5760e0908736030112610998576112d56144cc565b8115610c5e5790939086805b8681106114ea5750611304906001600160a01b03809616976004019084896142b8565b61130d8561360f565b9584889316925b86811061132d57604051806113298a826131c0565b0390f35b60c090868261133d838b8a6135e2565b018960609481898b87896113528286856135e2565b0161135c90613640565b93611366926135e2565b978c602097886113778b89856135e2565b016113819061364d565b918a61138e818a846135e2565b6113979061364d565b986113a1926135e2565b6040016113ad906135f2565b9181604051986113bc8a612eaf565b16885216888701526fffffffffffffffffffffffffffffffff1660408601528401521515888301528536037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff80016040136104f15761144e8493611487976040519061142682612f47565b6114318c820161301e565b825261144060a080920161301e565b878301528501523690613030565b908201528c60405180809781947f1b4103a900000000000000000000000000000000000000000000000000000000835260048301613661565b0391885af19081156114df578b916114b0575b50600192506114a9828b6136fa565b5201611314565b905082813d83116114d8575b6114c68183612f63565b810103126104f157600191513861149a565b503d6114bc565b6040513d8d823e3d90fd5b906001600160a01b036001916fffffffffffffffffffffffffffffffff611520604061151a878d8c9e9b9e6135e2565b016135f2565b16011691019592956112e1565b503461051e57608060031936011261051e5780611548612e83565b611550612e99565b611558612fb0565b916115616144cc565b6001600160a01b03809116803b156105b9578492836064926fffffffffffffffffffffffffffffffff60405197889687957ffdd46d6000000000000000000000000000000000000000000000000000000000875260243560048801521660248601521660448401525af1801561052157610a995750f35b503461051e57806001600160a01b036115f0366131fb565b9290916115fb6144cc565b1691823b1561165e576040517fc156a11d00000000000000000000000000000000000000000000000000000000815260048101929092526001600160a01b031660248201529082908290818381604481015b03925af1801561052157610a995750f35b505050fd5b503461051e576003196101a0813601126104885761167f612e83565b60249081359261168d612e99565b6101207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9c36011261099457610184359167ffffffffffffffff83116109985760e0908336030112610994576116e06144cc565b6116e86144cc565b6001600160a01b03809316604051907feac8f5b800000000000000000000000000000000000000000000000000000000825286600483015260209687838881855afa9283156108f25789936119a1575b508886841691604051937f70a0823100000000000000000000000000000000000000000000000000000000918286523060048701528b868c81885afa95861561094d57849661196e575b50813b1561059c5783918b839260405196879384927f40e58ee500000000000000000000000000000000000000000000000000000000845260048401525af19283156105a8578b93611955575b5050886040518094819382523060048301525afa9081156108f257869798999695969161191d575b506118069291610304916132db565b61180e6144cc565b169060c435838116918282036104f15760a435916fffffffffffffffffffffffffffffffff83168093036104f1578261184b9260040191866142b8565b604051947f1b4103a90000000000000000000000000000000000000000000000000000000086526064358581168091036104f1576004870152608435908582168092036104f1578601526044850152606484015260e4358015158091036104f157608484015264ffffffffff6101048035828116908190036104f15760a48601526101249182359081168091036104f15760c4860152610144359384168094036104f157600085938492889660e485015261016435908401525af19081156104945760009161088d5750604051908152f35b9450909190508784813d811161194e575b6119388183612f63565b810103126104f1579251859391906118066117f7565b503d61192e565b61196191929350612f17565b6109165788908a386117cf565b8c809297508195503d831161199a575b6119888183612f63565b810103126104f1578b92519438611782565b503d61197e565b9092508781813d83116119d2575b6119b98183612f63565b8101031261098957518581168103610989579138611738565b503d6119af565b503461051e57806001600160a01b036119f1366131fb565b9290916119fc6144cc565b1691823b1561165e576040517fea5ead1900000000000000000000000000000000000000000000000000000000815260048101929092526001600160a01b0316602482015290829082908183816044810161164d565b503461051e57604060031936011261051e57806001600160a01b03611a75612e83565b611a7d6144cc565b16803b15611aca578180916024604051809481937f42966c68000000000000000000000000000000000000000000000000000000008352833560048401525af1801561052157610a995750f35b50fd5b503461051e57604060031936011261051e57611ae7612e83565b602435611af26144cc565b6001600160a01b0380921691604051917feac8f5b8000000000000000000000000000000000000000000000000000000008352806004840152846020928385602481895afa948515610521578295611c8a575b50841691604051957f70a0823100000000000000000000000000000000000000000000000000000000918288523060048901528588602481885afa97881561094d578498611c57575b50813b1561059c5783916024839260405196879384927f40e58ee500000000000000000000000000000000000000000000000000000000845260048401525af19283156105a8578593611c3e575b505060246040518094819382523060048301525afa918215610c53578592611c0e575b5050610b6292610304916132db565b90809250813d8311611c37575b611c258183612f63565b810103126104f1575182610304611bff565b503d611c1b565b611c4a91929350612f17565b6109945782908638611bdc565b86809299508195503d8311611c83575b611c718183612f63565b810103126104f1578792519638611b8e565b503d611c67565b9094508381813d8311611cbb575b611ca28183612f63565b8101031261048857518481168103610488579338611b45565b503d611c98565b5061014060031936011261051e57611cd8612e83565b906101207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdc36011261051e5760405191611d1183612eaf565b611d19612f86565b8352611d23612e99565b9260209384820152611d33612fb0565b9060408101918252611d43612fec565b60608201908152611d52613002565b608083015260407fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff3c3601126104f157604051611d8d81612f47565b64ffffffffff60c43581811681036104f157825260e43590811681036104f1578782015260a083015260407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffefc3601126104f15760405191611ded83612f47565b610104356001600160a01b039485821682036104f1578796899686611e4a94610df19852610124358982015260c0860152611e266144cc565b806fffffffffffffffffffffffffffffffff928334168552610dae82895116614110565b6040519485809481937f1b4103a900000000000000000000000000000000000000000000000000000000835260048301613661565b503461051e57611e8e3661314f565b611e9a949193946144cc565b8315610c5e578591865b8581106120835750906001600160a01b03611ec292169286846142b8565b611ecb8361360f565b93855b848110611ee3576040518061132988826131c0565b60809081611ef28288886137e4565b018587611f008482846137e4565b602001611f0c90613640565b92611f188583856137e4565b604001611f249061364d565b9585611f318185876137e4565b958160c097888101611f4291613824565b96611f4e9291986137e4565b611f579061364d565b988d8d6060948592611f68926137e4565b01611f72906135f2565b916040519a611f808c612eaf565b6001600160a01b03168b52151560208b01526001600160a01b031660408a01526fffffffffffffffffffffffffffffffff16908801526001600160a01b0388169087015236611fce91613030565b60a08601523690611fde9261308c565b90830152836040518080947fbf061d0a000000000000000000000000000000000000000000000000000000008252600482019061201a91613878565b03818b5a94602095f18015612078578890612045575b6001925061203e82896136fa565b5201611ece565b506020823d602011612070575b8161205f60209383612f63565b810103126104f15760019151612030565b3d9150612052565b6040513d8a823e3d90fd5b926001600160a01b036001916fffffffffffffffffffffffffffffffff6120b0606061151a898c8c6137e4565b1601169301611ea4565b503461051e5760606003199080823601126105b5576120d7612e83565b916024359167ffffffffffffffff9485841161051e5783600401906101009384818736030112610488576044359788116104885760e090883603011261051e5750949293916121246144cc565b6001600160a01b0380931691608486019661213e8861364d565b9060648801916fffffffffffffffffffffffffffffffff9760040188612163856135f2565b1661216e92886142b8565b6040519788967fbf061d0a00000000000000000000000000000000000000000000000000000000885260209a8b998a60048b01526101248a0195836121b287612f9c565b1660248c0152602485016121c590613011565b151560448c015283604486016121da90612f9c565b1660648c01526121e990612fcf565b1660848a01526121f890612f9c565b1660a488015260c4870160a4820190612210916137c5565b60e40161221c91613ad5565b91829194610104880152526101448501929160005b82811061225c5750505050600083809203925af19081156104945760009161088d5750604051908152f35b9295506001919496508084612272829689613b28565b019501910192869492889694612231565b503461051e57604060031936011261051e57806001600160a01b036122a6612e83565b6122ae6144cc565b16803b15611aca578180916024604051809481937f7de6b1db000000000000000000000000000000000000000000000000000000008352833560048401525af1801561052157610a995750f35b503461051e57600319906101608236011261051e57612318612e83565b906101207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdc36011261051e57610144359267ffffffffffffffff84116104885760e090843603011261051e575061236d6144cc565b6001600160a01b038091169060843592818416908185036104f157606435946fffffffffffffffffffffffffffffffff86168096036104f157856123b59260040191866142b8565b604051937f1b4103a90000000000000000000000000000000000000000000000000000000085526024358381168091036104f15760048601526044358381168091036104f15760248601526044850152606484015260a4358015158091036104f157608484015260c43564ffffffffff908181168091036104f15760a485015260e4359081168091036104f15760c484015261010480359182168092036104f157836000602094829460e4840152610124938435908401525af19081156104945760009161123a57602082604051908152f35b503461051e57606060031936011261051e576124a2612e83565b9067ffffffffffffffff6024358181116105b5576124c490369060040161311e565b9160443590811161059c576124dd90369060040161311e565b6124e56144cc565b6001600160a01b036124f78585613ee4565b961690813b156109945791859161254693836040518096819582947f8659c27000000000000000000000000000000000000000000000000000000000845260206004850152602484019161329e565b03925af1801561094d57612560575b50610b629293614031565b9261256d610b6294612f17565b92612555565b503461051e5760809060031990828236011261051e57612591612e83565b9061259a612f86565b916044359367ffffffffffffffff9182861161059c573660238701121561059c578560040135918383116105b95760248701966024369161012086020101116105b9576064359384116105b95760e090843603011261059c576125fb6144cc565b8115610c5e5793959383805b838110612811575061262a906001600160a01b03809316946004019089866142b8565b6126338261360f565b9581859816975b83811061264f57604051806113298a826131c0565b888161265c81878661370e565b60e0016060908161266e848a8961370e565b0161267890613640565b91612684848a8961370e565b926020958a8a818b898b61269982858561370e565b016126a39061364d565b946126ad9261370e565b6126b69061364d565b986126c1918d61370e565b6040016126cd906135f2565b9181604051996126dc8b612eaf565b16895216888801526fffffffffffffffffffffffffffffffff1660408701528286015215158c8501528236037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff800112610916579183916127806127b7948d6127516040519161274a83612f2b565b850161301e565b815260a061276081860161301e565b8783015261277160c080960161301e565b60408301528501523690613030565b90820152604051809381927f4bc78b730000000000000000000000000000000000000000000000000000000083526004830161371f565b03818b8b5af19182156120785788926127e2575b5050906001916127db828b6136fa565b520161263a565b90809250813d831161280a575b6127f98183612f63565b8101031261099857516001386127cb565b503d6127ef565b906001600160a01b036001916fffffffffffffffffffffffffffffffff612841604061151a879c9e9c8a8f61370e565b1601169101979597612607565b503461051e5760031960608136011261048857612869612e83565b906024359267ffffffffffffffff9182851161048857610120818636030112610488576044359283116104885760e090833603011261051e576020610fd4600480850190870186613b79565b503461051e576128c43661314f565b6128d194919293946144cc565b8215610c5e5785865b848110612acd5750906128f791866001600160a01b0385166142b8565b6129008261360f565b93855b838110612918576040518061132988826131c0565b60a061292582868861397e565b019061293d604061293783888a61397e565b01613640565b86612954606061294e858a8561397e565b0161364d565b9161296d612963858a8561397e565b60e0810190613824565b602061298d878c61298761298283838b61397e565b61364d565b9761397e565b01359464ffffffffff86168603612ac957612a65976fffffffffffffffffffffffffffffffff6129f0966001600160a01b038f948f9864ffffffffff60209c848f608061151a612a2d9f926129e593612a219e61397e565b966040519e8f612efa565b168d52168c8c0152151560408b01521660608901521660808701526001600160a01b038a1660a08701523690613030565b60c0850152369161308c565b60e0820152604051809481927f21714be1000000000000000000000000000000000000000000000000000000008352600483016139be565b03818b6001600160a01b0389165af18015612078578890612a96575b60019250612a8f82896136fa565b5201612903565b506020823d602011612ac1575b81612ab060209383612f63565b81010312610add5760019151612a81565b3d9150612aa3565b8d80fd5b906001600160a01b036001916fffffffffffffffffffffffffffffffff612afa608061151a878b8d61397e565b16011691016128da565b506003199060408236011261051e57612b1b612e83565b916024359067ffffffffffffffff9081831161059c576101209083360301126105b55760405190612b4b82612efa565b612b5783600401612f9c565b8252612b656024840161301e565b9460209586840152612b7960448501613011565b6040840152612b8a60648501612f9c565b6060840152612b9b60848501612fcf565b9160808401928352612baf60a48601612f9c565b9460a08501958652612bc43660c48301613030565b60c08601526101048101359182116109985701366023820112156109945792612c0f612c4493879693612c028a97369060246004820135910161308c565b60e0850152610d816144cc565b6040519485809481937f21714be1000000000000000000000000000000000000000000000000000000008352600483016139be565b03925af19182156104fe578092612c60575b5050604051908152f35b9091508282813d8311612c89575b612c788183612f63565b8101031261051e5750513880612c56565b503d612c6e565b8261016060031936011261051e57612ca6612e83565b6101407fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdc36011261048857612cda83612eaf565b612ce2612f86565b8352612cec612e99565b9260209384820152612cfc612fb0565b60408201908152612d0b612fec565b9260608301938452612d1b613002565b608084015260607fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff3c3601126105b957604051612d5681612f2b565b64ffffffffff60c4358181168103610add57825260e4358181168103610add578883015261010435908116810361099857604082015260a084015260407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffedc3601126105b957604051612dc781612f47565b6001600160a01b0390610124358281168103610add579387969389969383612e3897612e039552610144358982015260c0860152611e266144cc565b6040519485809481937f4bc78b730000000000000000000000000000000000000000000000000000000083526004830161371f565b03925af19182156104fe578092612e53575050604051908152f35b9091508282813d8311612e7c575b612e6b8183612f63565b8101031261051e5750518280612c56565b503d612e61565b600435906001600160a01b03821682036104f157565b604435906001600160a01b03821682036104f157565b60e0810190811067ffffffffffffffff821117612ecb57604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b610100810190811067ffffffffffffffff821117612ecb57604052565b67ffffffffffffffff8111612ecb57604052565b6060810190811067ffffffffffffffff821117612ecb57604052565b6040810190811067ffffffffffffffff821117612ecb57604052565b90601f601f19910116810190811067ffffffffffffffff821117612ecb57604052565b602435906001600160a01b03821682036104f157565b35906001600160a01b03821682036104f157565b606435906fffffffffffffffffffffffffffffffff821682036104f157565b35906fffffffffffffffffffffffffffffffff821682036104f157565b608435906001600160a01b03821682036104f157565b60a4359081151582036104f157565b359081151582036104f157565b359064ffffffffff821682036104f157565b91908260409103126104f15760405161304881612f47565b602080829461305681612f9c565b84520135910152565b67ffffffffffffffff8111612ecb5760051b60200190565b359067ffffffffffffffff821682036104f157565b9291926130988261305f565b6040946130a786519283612f63565b819584835260208093019160608096028501948186116104f157925b8584106130d35750505050505050565b86848303126104f15784879184516130ea81612f2b565b6130f387612fcf565b8152613100838801613077565b8382015261310f86880161301e565b868201528152019301926130c3565b9181601f840112156104f15782359167ffffffffffffffff83116104f1576020808501948460051b0101116104f157565b90600319916080838201126104f1576001600160a01b039260043584811681036104f1579360243590811681036104f1579267ffffffffffffffff6044358181116104f157846131a19160040161311e565b949094936064359283116104f1578260e0920301126104f15760040190565b6020908160408183019282815285518094520193019160005b8281106131e7575050505090565b8351855293810193928101926001016131d9565b60031960609101126104f1576001600160a01b0360043581811681036104f157916024359160443590811681036104f15790565b919081101561326f5760051b810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc1813603018212156104f1570190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b90918281527f07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff83116104f15760209260051b809284830137010190565b919082039182116132e857565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6040517fa9059cbb0000000000000000000000000000000000000000000000000000000060208201526001600160a01b039290921660248301526044808301939093529181526133719161336c606483612f63565b61338b565b565b908160209103126104f1575180151581036104f15790565b6040516133e9916001600160a01b03166133a482612f47565b6000806020958685527f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c656487860152868151910182855af16133e361349e565b916134de565b805190828215928315613486575b505050156134025750565b608490604051907f08c379a00000000000000000000000000000000000000000000000000000000082526004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e60448201527f6f742073756363656564000000000000000000000000000000000000000000006064820152fd5b6134969350820181019101613373565b3882816133f7565b3d156134d9573d9067ffffffffffffffff8211612ecb57604051916134cd6020601f19601f8401160184612f63565b82523d6000602084013e565b606090565b9192901561355957508151156134f2575090565b3b156134fb5790565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152fd5b82519091501561356c5750805190602001fd5b604051907f08c379a000000000000000000000000000000000000000000000000000000000825281602080600483015282519283602484015260005b8481106135cb57505050601f19601f836000604480968601015201168101030190fd5b8181018301518682016044015285935082016135a8565b919081101561326f5760081b0190565b356fffffffffffffffffffffffffffffffff811681036104f15790565b906136198261305f565b6136266040519182612f63565b828152601f19613636829461305f565b0190602036910137565b3580151581036104f15790565b356001600160a01b03811681036104f15790565b6133719092919260e060c06101208301956001600160a01b038082511685528060208301511660208601526fffffffffffffffffffffffffffffffff6040830151166040860152606082015116606085015260808101511515608085015260a0810151602064ffffffffff918281511660a0880152015116828501520151910190602080916001600160a01b0381511684520151910152565b805182101561326f5760209160051b010190565b919081101561326f57610120020190565b6133719092919261010060c06101408301956001600160a01b038082511685528060208301511660208601526fffffffffffffffffffffffffffffffff6040830151166040860152606082015116606085015260808101511515608085015260a0810151604064ffffffffff918281511660a0880152826020820151168588015201511660e08501520151910190602080916001600160a01b0381511684520151910152565b602080916001600160a01b036137da82612f9c565b1684520135910152565b919081101561326f5760051b810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff21813603018212156104f1570190565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1813603018212156104f1570180359067ffffffffffffffff82116104f1576020019160608202360383136104f157565b9060208083526101208301908061014060c06001600160a01b0395868151168489015283810151151560408901528660408201511696606097888a01526fffffffffffffffffffffffffffffffff888301511660808a015260808201511660a08901526138ff60a0820151838a0190602080916001600160a01b0381511684520151910152565b015195610100808201528651809552019401926000905b83821061392557505050505090565b90919293948382826139716001948a5164ffffffffff604080926fffffffffffffffffffffffffffffffff815116855267ffffffffffffffff6020820151166020860152015116910152565b0196019493920190613916565b919081101561326f5760051b810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01813603018212156104f1570190565b9060208083526101408301908061016060e06001600160a01b0395868151168489015264ffffffffff848201511660408901526040810151151596606097888a015280888301511660808a01526fffffffffffffffffffffffffffffffff60808301511660a08a015260a08201511660c0890152613a5660c0820151838a0190602080916001600160a01b0381511684520151910152565b015195610120808201528651809552019401926000905b838210613a7c57505050505090565b9091929394838282613ac86001948a5164ffffffffff604080926fffffffffffffffffffffffffffffffff815116855267ffffffffffffffff6020820151166020860152015116910152565b0196019493920190613a6d565b90357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1823603018112156104f157016020813591019167ffffffffffffffff82116104f15760608202360383136104f157565b64ffffffffff613b73604080936fffffffffffffffffffffffffffffffff613b4f82612fcf565b16865267ffffffffffffffff613b6760208301613077565b1660208701520161301e565b16910152565b91613c6c9192613b876144cc565b6001600160a01b0380911660a0850192613ba08461364d565b90613bcd60808801916fffffffffffffffffffffffffffffffff9384613bc5856135f2565b1690866142b8565b613c8d6040519788957f21714be100000000000000000000000000000000000000000000000000000000875260209889988960048a015261014489019683613c1486612f9c565b1660248b015264ffffffffff613c2b8c870161301e565b1660448b0152613c3d60408601613011565b151560648b0152613c6160609785613c568a8901612f9c565b1660848d0152612fcf565b1660a48a0152612f9c565b1660c4870152613c8260e4870160c083016137c5565b610100810190613ad5565b809193610120610124880152526101648501929160005b828110613cf95750505050600083809203925af190811561049457600091613ccd575b50905090565b82813d8311613cf2575b613ce18183612f63565b8101031261051e5750518038613cc7565b503d613cd7565b9295506001919496508084613d0f829689613b28565b019501910192879492879694613ca4565b91906001600160a01b039283821690604051947fdd62ed3e0000000000000000000000000000000000000000000000000000000086523060048701528116918260248701526020958681604481855afa8015610494578691600091613ea4575b5010613d8f575b505050505050565b60008060405196613df388613de58b8201937f095ea7b3000000000000000000000000000000000000000000000000000000009889865260248401602090939291936001600160a01b0360408201951681520152565b03601f1981018a5289612f63565b87519082855af190613e0361349e565b82613e71575b5081613e66575b5015613e1d575b80613d87565b60405194850152602484015260006044840152604483526080830183811067ffffffffffffffff821117612ecb57613e5c9361336c916040528261338b565b3880808080613e17565b90503b151538613e10565b809192505190878215928315613e8c575b5050509038613e09565b613e9c9350820181019101613373565b388781613e82565b91508782813d8311613ecd575b613ebb8183612f63565b8101031261051e575085905138613d80565b503d613eb1565b919081101561326f5760051b0190565b919091613ef08361360f565b9260005b818110613f0057505050565b6001600160a01b03613f16612982838587613ed4565b16906040805180937f70a0823100000000000000000000000000000000000000000000000000000000825230600483015281602460209687935afa918215613fa85750600091613f77575b5060019250613f7082886136fa565b5201613ef4565b919282813d8311613fa1575b613f8d8183612f63565b8101031261051e5750906001915138613f61565b503d613f83565b513d6000823e3d90fd5b6040517f8da5cb5b000000000000000000000000000000000000000000000000000000008152602081600481305afa90811561049457600091613ff3575090565b6020813d8211614029575b8161400b60209383612f63565b810103126104885751906001600160a01b038216820361051e575090565b3d9150613ffe565b909160005b8181106140435750505050565b6001600160a01b03614059612982838588613ed4565b16906040805180937f70a0823100000000000000000000000000000000000000000000000000000000825230600483015281602460209687935afa918215613fa857506000916140dd575b50600192506140c16140d7916140ba84886136fa565b51906132db565b6140cf61298284878a613ed4565b61030d613fb2565b01614036565b919282813d8311614109575b6140f38183612f63565b8101031261051e575051600191906140c16140a4565b503d6140e9565b6001600160a01b031660409081517f70a08231000000000000000000000000000000000000000000000000000000008082526000903060048401526020908184602481885afa93841561429b57839461426c575b50843b156105b55785517fd0e30db00000000000000000000000000000000000000000000000000000000081528381600481348a5af180156142625761424f575b508190602487518097819382523060048301525afa9182156142445791614214575b506141d292506132db565b903482036141de575050565b6044925051907fe5f762580000000000000000000000000000000000000000000000000000000082523460048301526024820152fd5b905082813d831161423d575b61422a8183612f63565b810103126104f1576141d29151386141c7565b503d614220565b8551903d90823e3d90fd5b9261425b839294612f17565b92906141a5565b87513d86823e3d90fd5b9093508181813d8311614294575b6142848183612f63565b810103126105b557519238614164565b503d61427a565b86513d85823e3d90fd5b359065ffffffffffff821682036104f157565b9392936142c3613fb2565b946001600160a01b0393847f0000000000000000000000000000000000000000000000000000000000000000166000978860c08501357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1863603018112156104885785019485359567ffffffffffffffff87116105b55760200186360381136105b557843b156105b55789604051947f2b67b57000000000000000000000000000000000000000000000000000000000865216968760048601528a61438784612f9c565b16602486015260208301358b81168091036105b957601f86949260a086948f601f1995604488015265ffffffffffff806143c3604085016142a5565b1660648901526143d5606084016142a5565b1660848801526143e760808301612f9c565b1660a4870152013560c485015261010060e485015280610104850152806101249586860137868582860101520116810103018183865af180156108f2576144b7575b50908188923b156105b55786938360849260405196879586947f36c78516000000000000000000000000000000000000000000000000000000008652600486015230602486015216998a6044850152891660648401525af180156144ac57614498575b50613371939450613d20565b6144a28691612f17565b6105b9578461448c565b6040513d88823e3d90fd5b6144c49098919298612f17565b969038614429565b6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001630146144fe57565b60046040517fbbff6135000000000000000000000000000000000000000000000000000000008152fd";

    /*//////////////////////////////////////////////////////////////////////////
                                     DEPLOYERS
    //////////////////////////////////////////////////////////////////////////*/

    /// @notice Deploys {SablierV2Archive} from precompiled bytecode.
    function deployArchive(address initialAdmin) public returns (ISablierV2Archive archive) {
        bytes memory creationBytecode = bytes.concat(BYTECODE_ARCHIVE, abi.encode(initialAdmin));
        assembly {
            archive := create(0, add(creationBytecode, 0x20), mload(creationBytecode))
        }
        require(address(archive) != address(0), "Sablier V2 Precompiles: deployment failed for Archive contract");
    }

    /// @notice Deploys {SablierV2ProxyPlugin} from precompiled bytecode.
    function deployProxyPlugin(ISablierV2Archive archive) public returns (ISablierV2ProxyPlugin proxyPlugin) {
        bytes memory creationBytecode = bytes.concat(BYTECODE_PROXY_PLUGIN, abi.encode(archive));
        assembly {
            proxyPlugin := create(0, add(creationBytecode, 0x20), mload(creationBytecode))
        }
        require(
            address(proxyPlugin) != address(0), "Sablier V2 Precompiles: deployment failed for ProxyPlugin contract"
        );
    }

    /// @notice Deploys {SablierV2ProxyTarget} from precompiled bytecode.
    function deployProxyTarget(IAllowanceTransfer permit2) public returns (ISablierV2ProxyTarget proxyTarget) {
        bytes memory creationBytecode = bytes.concat(BYTECODE_PROXY_TARGET, abi.encode(permit2));
        assembly {
            proxyTarget := create(0, add(creationBytecode, 0x20), mload(creationBytecode))
        }
        require(
            address(proxyTarget) != address(0), "Sablier V2 Precompiles: deployment failed for ProxyTarget contract"
        );
    }

    /// @notice Deploys all V2 Periphery contracts in the following order:
    ///
    /// 1. {SablierV2Archive}
    /// 2. {SablierV2ProxyPlugin}
    /// 3. {SablierV2ProxyTarget}
    function deployPeriphery(
        address initialAdmin,
        IAllowanceTransfer permit2
    )
        public
        returns (ISablierV2Archive archive, ISablierV2ProxyPlugin proxyPlugin, ISablierV2ProxyTarget proxyTarget)
    {
        archive = deployArchive(initialAdmin);
        proxyPlugin = deployProxyPlugin(archive);
        proxyTarget = deployProxyTarget(permit2);
    }
}
