// SPDX-License-Identifier: GPL-3.0-or-later
// solhint-disable max-line-length,no-inline-assembly,reason-string
pragma solidity >=0.8.22;

import { Precompiles as V2CorePrecompiles } from "@sablier/v2-core/precompiles/Precompiles.sol";
import { ISablierV2LockupDynamic } from "@sablier/v2-core/src/interfaces/ISablierV2LockupDynamic.sol";
import { ISablierV2LockupLinear } from "@sablier/v2-core/src/interfaces/ISablierV2LockupLinear.sol";
import { ISablierV2LockupTranched } from "@sablier/v2-core/src/interfaces/ISablierV2LockupTranched.sol";
import { ISablierV2NFTDescriptor } from "@sablier/v2-core/src/interfaces/ISablierV2NFTDescriptor.sol";

import { ISablierV2BatchLockup } from "../src/interfaces/ISablierV2BatchLockup.sol";
import { ISablierV2MerkleLockupFactory } from "../src/interfaces/ISablierV2MerkleLockupFactory.sol";

contract Precompiles {
    /*//////////////////////////////////////////////////////////////////////////
                                     BYTECODES
    //////////////////////////////////////////////////////////////////////////*/

    bytes public constant BYTECODE_BATCH_LOCKUP =
        hex"60808060405234601557611e0a908161001a8239f35b5f80fdfe60806040526004361015610011575f80fd5b5f3560e01c806337266dd3146111a357806349a32c4014610e3e578063606ef87514610b025780639e743f29146107a6578063a514f83e1461040c5763f7ca34eb1461005b575f80fd5b3461033c5761006936611512565b91909282156103e4575f905f5b8481106103b057506001600160a01b036100939116918383611a7a565b61009c83611758565b926001600160a01b035f9316925b8181106100c357604051806100bf8782611587565b0390f35b6100ce818388611a17565b6100d7906117a7565b90826100e482828a611a17565b6020016100f0906117a7565b6100fb83838b611a17565b60400161010790611643565b9389610114858583611a17565b606001610120906117bb565b61012b868684611a17565b608001610137906117bb565b610142878785611a17565b60a00161014e90611a57565b918761015b818987611a17565b60c0810161016891611926565b98610174929196611a17565b60e0019360405195610185876116c6565b6001600160a01b0316865260208601966001600160a01b0316875260408601996fffffffffffffffffffffffffffffffff168a5260608601978d895260808701921515835260a08701931515845260c087019464ffffffffff16855236906101ec9261197a565b9360e08601948552366101fe916118c8565b966101008601978852604051998a977f31df3d480000000000000000000000000000000000000000000000000000000089526004890160209052610164890197516001600160a01b031660248a0152516001600160a01b03166044890152516fffffffffffffffffffffffffffffffff166064880152516001600160a01b0316608487015251151560a486015251151560c48501525164ffffffffff1660e48401525190610104830161014090528151809152610184830191602001905f905b808210610353575050925180516001600160a01b03166101248401526020908101516101448401529250819003815f885af18015610348575f90610312575b6001925061030b8288611901565b52016100aa565b506020823d8211610340575b8161032b602093836116ff565b8101031261033c57600191516102fd565b5f80fd5b3d915061031e565b6040513d5f823e3d90fd5b919493509160206060826103a1600194895164ffffffffff604080926fffffffffffffffffffffffffffffffff815116855267ffffffffffffffff6020820151166020860152015116910152565b019501920186939492916102be565b916001906fffffffffffffffffffffffffffffffff6103db60406103d5878a8c611a17565b01611643565b16019201610076565b7ff8bf106c000000000000000000000000000000000000000000000000000000005f5260045ffd5b3461033c5760607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261033c576104436115c0565b61044b6114cb565b906044359167ffffffffffffffff831161033c573660238401121561033c5782600401359267ffffffffffffffff841161033c57602481019060243691610140870201011161033c5783156103e45790915f9190825b85811061077457506001600160a01b036104be9116928484611a7a565b6104c784611758565b926001600160a01b03165f5b8581106104e857604051806100bf8782611587565b6104fb6104f6828886611a69565b6117a7565b90610512602061050c838a88611a69565b016117a7565b878561052460406103d5868585611a69565b61053a6060610534878686611a69565b016117bb565b906101006105648761055d8188610557608061053484848d611a69565b98611a69565b968c611a69565b01906001600160a01b036040519861057b8a611660565b1688526001600160a01b0360208901961686526fffffffffffffffffffffffffffffffff6040890191168152606088019189835260808901931515845260a08901941515855260607fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff60873603011261033c57604051956105fa876116e3565b61060660a08201611839565b875261061460c08201611839565b602088015260e00161062590611839565b604087015260c089019586523661063b916118c8565b9560e08901968752604051987f53b15727000000000000000000000000000000000000000000000000000000008a52516001600160a01b031660048a0152516001600160a01b03166024890152516fffffffffffffffffffffffffffffffff166044880152516001600160a01b03166064870152511515608486015251151560a485015251805164ffffffffff1660c4850152602081015164ffffffffff1660e48501526040015164ffffffffff1661010484015251610124830161071291602080916001600160a01b0381511684520151910152565b8180865a925f61016492602095f18015610348575f90610742575b6001925061073b8288611901565b52016104d3565b506020823d821161076c575b8161075b602093836116ff565b8101031261033c576001915161072d565b3d915061074e565b93926001906fffffffffffffffffffffffffffffffff61079a60406103d5898b89611a69565b160194019392936104a1565b3461033c576107b436611512565b91909282156103e4575f905f5b848110610ad457506001600160a01b036107de9116918383611a7a565b6107e783611758565b926001600160a01b035f9316925b81811061080a57604051806100bf8782611587565b610815818388611a17565b61081e906117a7565b908261082b82828a611a17565b602001610837906117a7565b61084283838b611a17565b60400161084e90611643565b938961085b858583611a17565b606001610867906117bb565b610872868684611a17565b60800161087e906117bb565b610889878785611a17565b60a00161089590611a57565b91876108a2818987611a17565b60c081016108af916117c8565b986108bb929196611a17565b60e00193604051956108cc876116c6565b6001600160a01b0316865260208601966001600160a01b0316875260408601996fffffffffffffffffffffffffffffffff168a5260608601978d895260808701921515835260a08701931515845260c087019464ffffffffff16855236906109339261184b565b9360e0860194855236610945916118c8565b966101008601978852604051998a977f32fbe22b0000000000000000000000000000000000000000000000000000000089526004890160209052610164890197516001600160a01b031660248a0152516001600160a01b03166044890152516fffffffffffffffffffffffffffffffff166064880152516001600160a01b0316608487015251151560a486015251151560c48501525164ffffffffff1660e48401525190610104830161014090528151809152610184830191602001905f905b808210610a8b575050925180516001600160a01b03166101248401526020908101516101448401529250819003815f885af18015610348575f90610a59575b60019250610a528288611901565b52016107f5565b506020823d8211610a83575b81610a72602093836116ff565b8101031261033c5760019151610a44565b3d9150610a65565b91949350916020604082610ac5600194895164ffffffffff602080926fffffffffffffffffffffffffffffffff8151168552015116910152565b01950192018693949291610a05565b916001906fffffffffffffffffffffffffffffffff610af960406103d5878a8c611a17565b160192016107c1565b3461033c57610b1036611512565b91909282156103e4575f905f5b848110610e1057506001600160a01b03610b3a9116918383611a7a565b610b4383611758565b926001600160a01b035f9316925b818110610b6657604051806100bf8782611587565b610b718183886115d6565b610b7a906117a7565b9082610b8782828a6115d6565b602001610b93906117a7565b610b9e83838b6115d6565b604001610baa90611643565b9389610bb78585836115d6565b606001610bc3906117bb565b610bce8686846115d6565b608001610bda906117bb565b9086610be78188866115d6565b60a08101610bf491611926565b97610c009291956115d6565b60c0019260405194610c1186611660565b6001600160a01b0316855260208501956001600160a01b0316865260408501986fffffffffffffffffffffffffffffffff16895260608501968c885260808601921515835260a0860193151584523690610c6a9261197a565b9260c0850193845236610c7c916118c8565b9560e085019687526040519889967f54c022920000000000000000000000000000000000000000000000000000000088526004880160209052610144880196516001600160a01b03166024890152516001600160a01b03166044880152516fffffffffffffffffffffffffffffffff166064870152516001600160a01b0316608486015251151560a485015251151560c4840152519060e4830161012090528151809152610164830191602001905f905b808210610db3575050925180516001600160a01b03166101048401526020908101516101248401529250819003815f885af18015610348575f90610d81575b60019250610d7a8288611901565b5201610b51565b506020823d8211610dab575b81610d9a602093836116ff565b8101031261033c5760019151610d6c565b3d9150610d8d565b91949350916020606082610e01600194895164ffffffffff604080926fffffffffffffffffffffffffffffffff815116855267ffffffffffffffff6020820151166020860152015116910152565b01950192018693949291610d2d565b916001906fffffffffffffffffffffffffffffffff610e3560406103d5878a8c6115d6565b16019201610b1d565b3461033c5760607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261033c57610e756115c0565b610e7d6114cb565b906044359167ffffffffffffffff831161033c573660238401121561033c5782600401359267ffffffffffffffff841161033c57602481019060243691610120870201011161033c5783156103e45790915f9190825b85811061117157506001600160a01b03610ef09116928484611a7a565b610ef984611758565b926001600160a01b03165f5b858110610f1a57604051806100bf8782611587565b610f286104f6828886611915565b90610f39602061050c838a88611915565b8785610f4b60406103d5868585611915565b610f5b6060610534878686611915565b9060e0610f8487610f7d8188610f77608061053484848d611915565b98611915565b968c611915565b01906001600160a01b0360405198610f9b8a611660565b1688526001600160a01b0360208901961686526fffffffffffffffffffffffffffffffff6040890191168152606088019189835260808901931515845260a08901941515855260407fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff60873603011261033c576040519561101a876116aa565b61102660a08201611839565b875260c00161103490611839565b602087015260c089019586523661104a916118c8565b9560e08901968752604051987fab167ccc000000000000000000000000000000000000000000000000000000008a52516001600160a01b031660048a0152516001600160a01b03166024890152516fffffffffffffffffffffffffffffffff166044880152516001600160a01b03166064870152511515608486015251151560a485015251805164ffffffffff1660c48501526020015164ffffffffff1660e484015251610104830161110f91602080916001600160a01b0381511684520151910152565b8180865a925f61014492602095f18015610348575f9061113f575b600192506111388288611901565b5201610f05565b506020823d8211611169575b81611158602093836116ff565b8101031261033c576001915161112a565b3d915061114b565b93926001906fffffffffffffffffffffffffffffffff61119760406103d5898b89611915565b16019401939293610ed3565b3461033c576111b136611512565b91909282156103e4575f905f5b84811061149d57506001600160a01b036111db9116918383611a7a565b6111e483611758565b926001600160a01b035f9316925b81811061120757604051806100bf8782611587565b6112128183886115d6565b61121b906117a7565b908261122882828a6115d6565b602001611234906117a7565b61123f83838b6115d6565b60400161124b90611643565b93896112588585836115d6565b606001611264906117bb565b61126f8686846115d6565b60800161127b906117bb565b90866112888188866115d6565b60a08101611295916117c8565b976112a19291956115d6565b60c00192604051946112b286611660565b6001600160a01b0316855260208501956001600160a01b0316865260408501986fffffffffffffffffffffffffffffffff16895260608501968c885260808601921515835260a086019315158452369061130b9261184b565b9260c085019384523661131d916118c8565b9560e085019687526040519889967f897f362b0000000000000000000000000000000000000000000000000000000088526004880160209052610144880196516001600160a01b03166024890152516001600160a01b03166044880152516fffffffffffffffffffffffffffffffff166064870152516001600160a01b0316608486015251151560a485015251151560c4840152519060e4830161012090528151809152610164830191602001905f905b808210611454575050925180516001600160a01b03166101048401526020908101516101248401529250819003815f885af18015610348575f90611422575b6001925061141b8288611901565b52016111f2565b506020823d821161144c575b8161143b602093836116ff565b8101031261033c576001915161140d565b3d915061142e565b9194935091602060408261148e600194895164ffffffffff602080926fffffffffffffffffffffffffffffffff8151168552015116910152565b019501920186939492916113ce565b916001906fffffffffffffffffffffffffffffffff6114c260406103d5878a8c6115d6565b160192016111be565b602435906001600160a01b038216820361033c57565b9181601f8401121561033c5782359167ffffffffffffffff831161033c576020808501948460051b01011161033c57565b60607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc82011261033c576004356001600160a01b038116810361033c57916024356001600160a01b038116810361033c57916044359067ffffffffffffffff821161033c57611583916004016114e1565b9091565b60206040818301928281528451809452019201905f5b8181106115aa5750505090565b825184526020938401939092019160010161159d565b600435906001600160a01b038216820361033c57565b91908110156116165760051b810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff018136030182121561033c570190565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b356fffffffffffffffffffffffffffffffff8116810361033c5790565b610100810190811067ffffffffffffffff82111761167d57604052565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6040810190811067ffffffffffffffff82111761167d57604052565b610120810190811067ffffffffffffffff82111761167d57604052565b6060810190811067ffffffffffffffff82111761167d57604052565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff82111761167d57604052565b67ffffffffffffffff811161167d5760051b60200190565b9061176282611740565b61176f60405191826116ff565b8281527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe061179d8294611740565b0190602036910137565b356001600160a01b038116810361033c5790565b35801515810361033c5790565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe18136030182121561033c570180359067ffffffffffffffff821161033c57602001918160061b3603831361033c57565b35906fffffffffffffffffffffffffffffffff8216820361033c57565b359064ffffffffff8216820361033c57565b92919261185782611740565b9361186560405195866116ff565b602085848152019260061b82019181831161033c57925b8284106118895750505050565b60408483031261033c57602060409182516118a3816116aa565b6118ac8761181c565b81526118b9838801611839565b8382015281520193019261187c565b919082604091031261033c576040516118e0816116aa565b809280356001600160a01b038116810361033c578252602090810135910152565b80518210156116165760209160051b010190565b919081101561161657610120020190565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe18136030182121561033c570180359067ffffffffffffffff821161033c5760200191606082023603831361033c57565b92919261198682611740565b9361199460405195866116ff565b606060208685815201930282019181831161033c57925b8284106119b85750505050565b60608483031261033c57604051906119cf826116e3565b6119d88561181c565b825260208501359067ffffffffffffffff8216820361033c5782602092836060950152611a0760408801611839565b60408201528152019301926119ab565b91908110156116165760051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffee18136030182121561033c570190565b3564ffffffffff8116810361033c5790565b919081101561161657610140020190565b9190611acf6040517f23b872dd00000000000000000000000000000000000000000000000000000000602082015233602482015230604482015283606482015260648152611ac96084826116ff565b82611c8f565b6001600160a01b0381166001600160a01b03604051947fdd62ed3e0000000000000000000000000000000000000000000000000000000086523060048701521693846024820152602081604481855afa80156103485784915f91611c42575b5010611b3b575b50505050565b5f806040519460208601907f095ea7b3000000000000000000000000000000000000000000000000000000008252876024880152604487015260448652611b836064876116ff565b85519082855af190611b93611d14565b82611c10575b5081611c05575b5015611bad575b80611b35565b611bf8611bfd93604051907f095ea7b300000000000000000000000000000000000000000000000000000000602083015260248201525f604482015260448152611ac96064826116ff565b611c8f565b5f8080611ba7565b90503b15155f611ba0565b80519192508115918215611c28575b5050905f611b99565b611c3b9250602080918301019101611c77565b5f80611c1f565b9150506020813d602011611c6f575b81611c5e602093836116ff565b8101031261033c578390515f611b2e565b3d9150611c51565b9081602091031261033c5751801515810361033c5790565b5f806001600160a01b03611cb893169360208151910182865af1611cb1611d14565b9083611d71565b8051908115159182611cf9575b5050611cce5750565b7f5274afe7000000000000000000000000000000000000000000000000000000005f5260045260245ffd5b611d0c9250602080918301019101611c77565b155f80611cc5565b3d15611d6c573d9067ffffffffffffffff821161167d5760405191611d6160207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f84011601846116ff565b82523d5f602084013e565b606090565b90611dae5750805115611d8657805190602001fd5b7f1425ea42000000000000000000000000000000000000000000000000000000005f5260045ffd5b81511580611df4575b611dbf575090565b6001600160a01b03907f9996b315000000000000000000000000000000000000000000000000000000005f521660045260245ffd5b50803b15611db756fea164736f6c634300081a000a";
    bytes public constant BYTECODE_MERKLE_LOCKUP_FACTORY =
        hex"608080604052346015576141d4908161001a8239f35b5f80fdfe60806040526004361015610011575f80fd5b5f3560e01c80631e323876146105285780634d7c0f111461041e5763769bed201461003a575f80fd5b3461041a5760c07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261041a5760043567ffffffffffffffff811161041a57610089903690600401610a26565b6024359073ffffffffffffffffffffffffffffffffffffffff82169182810361041a5760407fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffbc36011261041a57604051906100e382610972565b60443564ffffffffff8116810361041a57825260643564ffffffffff8116810361041a57602083015282519060208401511515836040860151926060870151608088015191604051806020810194602086526040820161014291610b48565b03601f1981018252610154908261098e565b60a08a01519360c08b015160405181819251908160208401916020019161017a92610b27565b81010380825261018d906020018261098e565b61019690610b6d565b9060e08c0151151592604051956020870198896101c59164ffffffffff60208092828151168552015116910152565b604087526101d460608861098e565b6040519a8b9a60208c019d8e3360601b905260601b7fffffffffffffffffffffffffffffffffffffffff0000000000000000000000001660348d015260f81b60488c015260d81b7fffffffffff0000000000000000000000000000000000000000000000000000001660498b015260601b7fffffffffffffffffffffffffffffffffffffffff00000000000000000000000016604e8a015251908160628a0161027c92610b27565b8701946062860152608285015260f81b60a284015260601b7fffffffffffffffffffffffffffffffffffffffff0000000000000000000000001660a383015251918260b783016102cb92610b27565b0160620103605501601f19810182526102e4908261098e565b51902060405161174880820182811067ffffffffffffffff8211176103ed578291610c9f83396080815261034160406103206080840189610bfe565b92896020820152018664ffffffffff60208092828151168552015116910152565b03905ff59283156103e2576103a56103c7937f2ba0fe49588281dbb122dd3b7f3e2b3396338f70dbe3c62bf3e3888b4ba7ffb89273ffffffffffffffffffffffffffffffffffffffff6020971695869560405194859460c0865260c0860190610bfe565b9289850152604084019064ffffffffff60208092828151168552015116910152565b608435608083015260a43560a08301520390a2604051908152f35b6040513d5f823e3d90fd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b5f80fd5b3461041a5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261041a5760043567ffffffffffffffff811161041a573660238201121561041a5780600401359067ffffffffffffffff821161041a573660248360061b8301011161041a575f90815b838310156105095760248360061b830101359067ffffffffffffffff821680920361041a5767ffffffffffffffff160167ffffffffffffffff81116104dc57600190920191610492565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b602090670de0b6b3a764000067ffffffffffffffff6040519216148152f35b3461041a5760a07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261041a5760043567ffffffffffffffff811161041a57610577903690600401610a26565b60243573ffffffffffffffffffffffffffffffffffffffff81169081810361041a576044359067ffffffffffffffff821161041a573660238301121561041a57816004013567ffffffffffffffff81116103ed57604051926105df60208360051b018561098e565b8184526024602085019260061b8201019036821161041a57602401915b818310610925575050505f9082515f905b8082106108cd5750508451906020860151151584604088015192606089015160808a015191604051806020810194602086526040820161064c91610b48565b03601f198101825261065e908261098e565b8b60a08101519460c082015160405181819251908160208401916020019161068592610b27565b810103808252610698906020018261098e565b6106a190610b6d565b9160e001511515926040519586602081019960208b52604082016106c491610bae565b03601f19810188526106d6908861098e565b6040519a8b9a60208c019d8e3360601b905260601b7fffffffffffffffffffffffffffffffffffffffff0000000000000000000000001660348d015260f81b60488c015260d81b7fffffffffff0000000000000000000000000000000000000000000000000000001660498b015260601b7fffffffffffffffffffffffffffffffffffffffff00000000000000000000000016604e8a015251908160628a0161077e92610b27565b8701946062860152608285015260f81b60a284015260601b7fffffffffffffffffffffffffffffffffffffffff0000000000000000000000001660a383015251918260b783016107cd92610b27565b0160620103605501601f19810182526107e6908261098e565b519020604051611de18082019082821067ffffffffffffffff8311176103ed578291610837916123e7843960608152610822606082018a610bfe565b90886020820152604081830391015286610bae565b03905ff580156103e2576020947ffe44018cf74992b2720702385a1728bd329dd136e4f651203176c81c12710a8b926108ac73ffffffffffffffffffffffffffffffffffffffff61089a941696879660405195869560c0875260c0870190610bfe565b918a8601528482036040860152610bae565b906060830152606435608083015260843560a08301520390a2604051908152f35b909284518410156108f85760019064ffffffffff6020808760051b890101510151160193019061060d565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b60408336031261041a576040519061093c82610972565b83359067ffffffffffffffff8216820361041a5782602092604094526109638387016109be565b838201528152019201916105fc565b6040810190811067ffffffffffffffff8211176103ed57604052565b90601f601f19910116810190811067ffffffffffffffff8211176103ed57604052565b3590811515820361041a57565b359064ffffffffff8216820361041a57565b81601f8201121561041a5780359067ffffffffffffffff82116103ed5760405192610a056020601f19601f860116018561098e565b8284526020838301011161041a57815f926020809301838601378301015290565b9190916101008184031261041a5760405190610100820182811067ffffffffffffffff8211176103ed576040528193813573ffffffffffffffffffffffffffffffffffffffff8116810361041a578352610a82602083016109b1565b6020840152610a93604083016109be565b6040840152606082013573ffffffffffffffffffffffffffffffffffffffff8116810361041a576060840152608082013567ffffffffffffffff811161041a5781610adf9184016109d0565b608084015260a082013560a084015260c08201359067ffffffffffffffff821161041a5782610b1760e09492610b22948694016109d0565b60c0860152016109b1565b910152565b5f5b838110610b385750505f910152565b8181015183820152602001610b29565b90601f19601f602093610b6681518092818752878088019101610b27565b0116010190565b602081519101519060208110610b81575090565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9060200360031b1b1690565b90602080835192838152019201905f5b818110610bcb5750505090565b8251805167ffffffffffffffff16855260209081015164ffffffffff168186015260409094019390920191600101610bbe565b9073ffffffffffffffffffffffffffffffffffffffff825116815260208201511515602082015264ffffffffff604083015116604082015273ffffffffffffffffffffffffffffffffffffffff606083015116606082015260e080610c93610c7760808601516101006080870152610100860190610b48565b60a086015160a086015260c086015185820360c0870152610b48565b93015115159101529056fe610160806040523461042857611748803803809161001d8285610560565b833981019080820390608082126104285780516001600160401b03811161042857810190610100828503126104285760405161010081016001600160401b038111828210176105355760405282516001600160a01b038116810361042857815261008960208401610583565b6020820190815261009c60408501610590565b60408301908152606085015194906001600160a01b0386168603610428576060840195865260808201516001600160401b03811161042857886100e09184016105de565b6080850190815260a08381015190860190815260c084015190999192916001600160401b0382116104285761011c60e09161012a9387016105de565b9460c0880195865201610583565b9360e0860194855260208701519560018060a01b038716998a880361042857604090603f1901126104285760408051989089016001600160401b0381118a8210176105355761018d9160609160405261018560408201610590565b8b5201610590565b9860208901998a52855151602081116105495750515f80546001600160a01b0319166001600160a01b0392831617905590511660805251151560a0525164ffffffffff1660c0525180519097906001600160401b03811161053557600154600181811c9116801561052b575b602082101461051757601f81116104b4575b506020601f821160011461044857819064ffffffffff98999a5f9261043d575b50508160011b915f199060031b1c1916176001555b5160e052516040516102736020828161026281830196878151938492016105bd565b81010301601f198101835282610560565b519051906020811061042c575b50610100525115156101205261014052511669ffffffffff0000000000600454925160281b169160018060501b031916171760045560018060a01b0360805116604051905f806020840163095ea7b360e01b815285602486015281196044860152604485526102f0606486610560565b84519082855af16102ff610623565b816103f1575b50806103e7575b156103a2575b60405161102490816107248239608051818181610481015281816106d60152610c20015260a0518181816107140152610b11015260c05181818161015f01528181610a6801528181610d8a0152610f49015260e0518181816102d3015261062201526101005181610e2801526101205181818161073e0152610ad50152610140518181816101af01526108870152f35b6103da6103df936040519063095ea7b360e01b602083015260248201525f6044820152604481526103d4606482610560565b82610652565b610652565b5f8080610312565b50803b151561030c565b8051801592508215610406575b50505f610305565b81925090602091810103126104285760206104219101610583565b5f806103fe565b5f80fd5b5f199060200360031b1b165f610280565b015190505f8061022b565b601f1982169960015f52815f209a5f5b81811061049c57509164ffffffffff999a9b91846001959410610484575b505050811b01600155610240565b01515f1960f88460031b161c191690555f8080610476565b838301518d556001909c019b60209384019301610458565b60015f527fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6601f830160051c8101916020841061050d575b601f0160051c01905b818110610502575061020b565b5f81556001016104f5565b90915081906104ec565b634e487b7160e01b5f52602260045260245ffd5b90607f16906101f9565b634e487b7160e01b5f52604160045260245ffd5b63a52d539b60e01b5f52600452602060245260445ffd5b601f909101601f19168101906001600160401b0382119082101761053557604052565b5190811515820361042857565b519064ffffffffff8216820361042857565b6001600160401b03811161053557601f01601f191660200190565b5f5b8381106105ce5750505f910152565b81810151838201526020016105bf565b81601f820112156104285780516105f4816105a2565b926106026040519485610560565b818452602082840101116104285761062091602080850191016105bd565b90565b3d1561064d573d90610634826105a2565b916106426040519384610560565b82523d5f602084013e565b606090565b5f8061067a9260018060a01b03169360208151910182865af1610673610623565b90836106c5565b80519081151591826106a2575b50506106905750565b635274afe760e01b5f5260045260245ffd5b81925090602091810103126104285760206106bd9101610583565b155f80610687565b906106e957508051156106da57805190602001fd5b630a12f52160e11b5f5260045ffd5b8151158061071a575b6106fa575090565b639996b31560e01b5f9081526001600160a01b0391909116600452602490fd5b50803b156106f256fe6080806040526004361015610012575f80fd5b5f3560e01c90816306fdde0314610e12575080631686c90914610b3657806316c3549d14610afa5780631bfd681414610abe5780633bfe03a814610a905780633f31ae3f146104a55780634800d97f1461045557806349fc73dd1461031a5780634e390d3e146102f657806351e75e8b146102bc57806375829def146101ed57806390e64d13146101d35780639e93e57714610183578063bb4b573414610142578063ce516507146101025763f851a440146100cc575f80fd5b346100fe575f6003193601126100fe57602073ffffffffffffffffffffffffffffffffffffffff5f5416604051908152f35b5f80fd5b346100fe5760206003193601126100fe57602061013860043560ff6001918060081c5f526002602052161b60405f205416151590565b6040519015158152f35b346100fe575f6003193601126100fe57602060405164ffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b346100fe575f6003193601126100fe57602060405173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b346100fe575f6003193601126100fe576020610138610f41565b346100fe5760206003193601126100fe57610206610ec1565b5f5473ffffffffffffffffffffffffffffffffffffffff811633810361028d575073ffffffffffffffffffffffffffffffffffffffff7fffffffffffffffffffffffff0000000000000000000000000000000000000000921691829116175f55337fbdd36143ee09de60bdefca70680e0f71189b2ed7acee364b53917ad433fdaf805f80a3005b7fc6cce6a4000000000000000000000000000000000000000000000000000000005f526004523360245260445ffd5b346100fe575f6003193601126100fe5760206040517f00000000000000000000000000000000000000000000000000000000000000008152f35b346100fe575f6003193601126100fe57602064ffffffffff60035416604051908152f35b346100fe575f6003193601126100fe576040515f6001548060011c9060018116801561044b575b60208310811461041e578285529081156103dc575060011461037e575b61037a8361036e81850382610f00565b60405191829182610e5b565b0390f35b91905060015f527fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6915f905b8082106103c25750909150810160200161036e61035e565b9192600181602092548385880101520191019092916103aa565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660208086019190915291151560051b8401909101915061036e905061035e565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b91607f1691610341565b346100fe575f6003193601126100fe57602060405173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b346100fe5760806003193601126100fe5760043560243573ffffffffffffffffffffffffffffffffffffffff81168091036100fe57604435916fffffffffffffffffffffffffffffffff83168093036100fe576064359067ffffffffffffffff82116100fe57366023830112156100fe57816004013567ffffffffffffffff81116100fe578060051b92602484820101903682116100fe57604051602081019085825287604082015288606082015260608152610563608082610f00565b519020604051602081019182526020815261057f604082610f00565b5190209261058b610f41565b610a39576105b08560ff6001918060081c5f526002602052161b60405f205416151590565b610a0d576105c46020604051970187610f00565b8552602401602085015b8282106109fd57505050935f945b835186101561061e5760208660051b85010151908181105f1461060d575f52602052600160405f205b9501946105dc565b905f52602052600160405f20610605565b84907f0000000000000000000000000000000000000000000000000000000000000000036109d55760035464ffffffffff8116156109a1575b508260081c5f52600260205260405f20600160ff85161b815417905573ffffffffffffffffffffffffffffffffffffffff5f54169160405161069881610ee4565b5f81525f602082015260405193610100850185811067ffffffffffffffff8211176109745760405284526020840183815260408501838152606086017f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16815260808701907f00000000000000000000000000000000000000000000000000000000000000001515825260a08801927f0000000000000000000000000000000000000000000000000000000000000000151584526040519461076e86610ee4565b60045464ffffffffff8116875260281c64ffffffffff16602087015260c08a0195865260e08a01968752604051997fab167ccc000000000000000000000000000000000000000000000000000000008b525173ffffffffffffffffffffffffffffffffffffffff1660048b01525173ffffffffffffffffffffffffffffffffffffffff1660248a0152516fffffffffffffffffffffffffffffffff1660448901525173ffffffffffffffffffffffffffffffffffffffff166064880152511515608487015251151560a486015251805164ffffffffff1660c48601526020015164ffffffffff1660e485015251805173ffffffffffffffffffffffffffffffffffffffff166101048501526020015161012484015282807f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff165a925f61014492602095f1928315610969575f93610911575b50907f28b58397e03322f670d6b223cc863f8c148e368b8b615412e6798a641a22842d60406020958594825191825287820152a3604051908152f35b939250906020843d602011610961575b8161092e60209383610f00565b810103126100fe5792519192907f28b58397e03322f670d6b223cc863f8c148e368b8b615412e6798a641a22842d6108d5565b3d9150610921565b6040513d5f823e3d90fd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b7fffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000164264ffffffffff161760035583610657565b7f0fa7d73c000000000000000000000000000000000000000000000000000000005f5260045ffd5b81358152602091820191016105ce565b847f712b37a3000000000000000000000000000000000000000000000000000000005f5260045260245ffd5b7f442b1841000000000000000000000000000000000000000000000000000000005f524260045264ffffffffff7f00000000000000000000000000000000000000000000000000000000000000001660245260445ffd5b346100fe575f6003193601126100fe57604060045464ffffffffff825191818116835260281c166020820152f35b346100fe575f6003193601126100fe5760206040517f000000000000000000000000000000000000000000000000000000000000000015158152f35b346100fe575f6003193601126100fe5760206040517f000000000000000000000000000000000000000000000000000000000000000015158152f35b346100fe5760406003193601126100fe57610b4f610ec1565b6024356fffffffffffffffffffffffffffffffff81168091036100fe5773ffffffffffffffffffffffffffffffffffffffff5f541633810361028d575064ffffffffff6003541680151580610dc4575b80610db5575b610d5b57506040515f8073ffffffffffffffffffffffffffffffffffffffff60208401957fa9059cbb000000000000000000000000000000000000000000000000000000008752169485602485015284604485015260448452610c09606485610f00565b73ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001693519082855af13d15610d4f573d67ffffffffffffffff811161097457610ca79160405191610c9760207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f8401160184610f00565b82523d5f602084013e5b83610f7e565b8051908115159182610d2b575b5050610d0057507f2e9d425ba8b27655048400b366d7b6a1f7180ebdb088e06bb7389704860ffe1f602073ffffffffffffffffffffffffffffffffffffffff5f541692604051908152a3005b7f5274afe7000000000000000000000000000000000000000000000000000000005f5260045260245ffd5b81925090602091810103126100fe57602001518015908115036100fe578480610cb4565b610ca790606090610ca1565b7f92b66697000000000000000000000000000000000000000000000000000000005f524260045264ffffffffff7f00000000000000000000000000000000000000000000000000000000000000001660245260445260645ffd5b50610dbe610f41565b15610ba5565b5062093a80810164ffffffffff8111610de55764ffffffffff164211610b9f565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b346100fe575f6003193601126100fe5761037a907f000000000000000000000000000000000000000000000000000000000000000060208201526020815261036e604082610f00565b919091602081528251928360208301525f5b848110610eab5750507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f845f6040809697860101520116010190565b8060208092840101516040828601015201610e6d565b6004359073ffffffffffffffffffffffffffffffffffffffff821682036100fe57565b6040810190811067ffffffffffffffff82111761097457604052565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff82111761097457604052565b64ffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168015159081610f76575090565b905042101590565b90610fbb5750805115610f9357805190602001fd5b7f1425ea42000000000000000000000000000000000000000000000000000000005f5260045ffd5b8151158061100e575b610fcc575090565b73ffffffffffffffffffffffffffffffffffffffff907f9996b315000000000000000000000000000000000000000000000000000000005f521660045260245ffd5b50803b15610fc456fea164736f6c634300081a000a610180806040523461044857611de1803803809161001d82856106ab565b83398101906060818303126104485780516001600160401b03811161044857810161010081840312610448576040519061010082016001600160401b038111838210176105025760405280516001600160a01b0381168103610448578252610087602082016106ce565b916020810192835261009b604083016106db565b60408201908152606083015193906001600160a01b0385168503610448576060830194855260808401516001600160401b03811161044857876100df918601610729565b916080840192835260a08501519360a0810194855260c086015160018060401b0381116104485760e06101178b610125938a01610729565b9760c08401988952016106ce565b60e082019081526020890151989097906001600160a01b038a168a03610448576040810151906001600160401b03821161044857018a601f82011215610448578051906001600160401b0382116105025760209b8c6040519d8e61018e828760051b01826106ab565b858152019360061b8301019181831161044857602001925b82841061064f5750505050865151602081116106385750515f80546001600160a01b0319166001600160a01b0392831617905590511660805251151560a0525164ffffffffff1660c052518051906001600160401b0382116105025760015490600182811c9216801561062e575b602083101461061a5781601f8493116105ac575b50602090601f8311600114610546575f9261053b575b50508160011b915f199060031b1c1916176001555b5160e05251604051610286602082816102758183019687815193849201610708565b81010301601f1981018352826106ab565b519051906020811061052a575b506101005251151561012052610140528051905f915f915b81831061044c57836101605260018060a01b036080511660018060a01b03610140511690604051905f806020840163095ea7b360e01b815285602486015281196044860152604485526102ff6064866106ab565b84519082855af161030e610782565b81610411575b5080610407575b156103c2575b60405161155e908161088382396080518181816105d10152818161095d0152611061015260a0518181816109870152610f52015260c0518181816102bb01528181610eac015281816111cb015261135d015260e05181818161042301526107b40152610100518161123c0152610120518181816109c20152610f160152610140518181816101390152610ac20152610160518181816102ff01526106980152f35b6103fa6103ff936040519063095ea7b360e01b602083015260248201525f6044820152604481526103f46064826106ab565b826107b1565b6107b1565b808080610321565b50803b151561031b565b8051801592508215610426575b505084610314565b819250906020918101031261044857602061044191016106ce565b848061041e565b5f80fd5b91929091906001600160401b03610463858461076e565b5151166001600160401b03918216019081116105165792610484818361076e565b519060045491680100000000000000008310156105025760018301806004558310156104ee5760019260045f5260205f200190838060401b038151166cffffffffff00000000000000006020845493015160401b1691858060681b031916171790550191906102ab565b634e487b7160e01b5f52603260045260245ffd5b634e487b7160e01b5f52604160045260245ffd5b634e487b7160e01b5f52601160045260245ffd5b5f199060200360031b1b165f610293565b015190505f8061023e565b60015f9081528281209350601f198516905b818110610594575090846001959493921061057c575b505050811b01600155610253565b01515f1960f88460031b161c191690555f808061056e565b92936020600181928786015181550195019301610558565b60015f529091507fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6601f840160051c81019160208510610610575b90601f859493920160051c01905b8181106106025750610228565b5f81558493506001016105f5565b90915081906105e7565b634e487b7160e01b5f52602260045260245ffd5b91607f1691610214565b63a52d539b60e01b5f52600452602060245260445ffd5b6040848303126104485760408051919082016001600160401b03811183821017610502576040528451906001600160401b038216820361044857826020926040945261069c8388016106db565b838201528152019301926101a6565b601f909101601f19168101906001600160401b0382119082101761050257604052565b5190811515820361044857565b519064ffffffffff8216820361044857565b6001600160401b03811161050257601f01601f191660200190565b5f5b8381106107195750505f910152565b818101518382015260200161070a565b81601f8201121561044857805161073f816106ed565b9261074d60405194856106ab565b818452602082840101116104485761076b9160208085019101610708565b90565b80518210156104ee5760209160051b010190565b3d156107ac573d90610793826106ed565b916107a160405193846106ab565b82523d5f602084013e565b606090565b5f806107d99260018060a01b03169360208151910182865af16107d2610782565b9083610824565b8051908115159182610801575b50506107ef5750565b635274afe760e01b5f5260045260245ffd5b819250906020918101031261044857602061081c91016106ce565b155f806107e6565b90610848575080511561083957805190602001fd5b630a12f52160e11b5f5260045ffd5b81511580610879575b610859575090565b639996b31560e01b5f9081526001600160a01b0391909116600452602490fd5b50803b1561085156fe6080806040526004361015610012575f80fd5b5f3560e01c90816306fdde0314611226575080631686c90914610f7757806316c3549d14610f3b5780631bfd681414610eff5780633f31ae3f146105f55780634800d97f146105a557806349fc73dd1461046a5780634e390d3e1461044657806351e75e8b1461040c57806375829def1461033d57806390e64d1314610323578063936c63d9146102df578063bb4b57341461029e578063bf4ed03f1461019d578063ce5165071461015d578063da7924681461010d5763f851a440146100d7575f80fd5b34610109575f60031936011261010957602073ffffffffffffffffffffffffffffffffffffffff5f5416604051908152f35b5f80fd5b34610109575f60031936011261010957602060405173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b3461010957602060031936011261010957602061019360043560ff6001918060081c5f526002602052161b60405f205416151590565b6040519015158152f35b34610109575f600319360112610109576004546101b981611392565b906101c76040519283611314565b80825260045f9081526020830191907f8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b835b838310610261578486604051918291602083019060208452518091526040830191905f5b81811061022b575050500390f35b8251805167ffffffffffffffff16855260209081015164ffffffffff16818601528695506040909401939092019160010161021d565b600160208192604051610273816112f8565b64ffffffffff865467ffffffffffffffff8116835260401c16838201528152019201920191906101f9565b34610109575f60031936011261010957602060405164ffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b34610109575f60031936011261010957602060405167ffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b34610109575f600319360112610109576020610193611355565b34610109576020600319360112610109576103566112d5565b5f5473ffffffffffffffffffffffffffffffffffffffff81163381036103dd575073ffffffffffffffffffffffffffffffffffffffff7fffffffffffffffffffffffff0000000000000000000000000000000000000000921691829116175f55337fbdd36143ee09de60bdefca70680e0f71189b2ed7acee364b53917ad433fdaf805f80a3005b7fc6cce6a4000000000000000000000000000000000000000000000000000000005f526004523360245260445ffd5b34610109575f6003193601126101095760206040517f00000000000000000000000000000000000000000000000000000000000000008152f35b34610109575f60031936011261010957602064ffffffffff60035416604051908152f35b34610109575f600319360112610109576040515f6001548060011c9060018116801561059b575b60208310811461056e5782855290811561052c57506001146104ce575b6104ca836104be81850382611314565b6040519182918261126f565b0390f35b91905060015f527fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6915f905b808210610512575090915081016020016104be6104ae565b9192600181602092548385880101520191019092916104fa565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660208086019190915291151560051b840190910191506104be90506104ae565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b91607f1691610491565b34610109575f60031936011261010957602060405173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b34610109576080600319360112610109576004356024359073ffffffffffffffffffffffffffffffffffffffff821680920361010957604435916fffffffffffffffffffffffffffffffff831691828403610109576064359367ffffffffffffffff851161010957366023860112156101095784600401359467ffffffffffffffff86116101095760248660051b8201013681116101095767ffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016670de0b6b3a76400008103610ed457506040516020810190858252866040820152876060820152606081526106ee608082611314565b519020604051602081019182526020815261070a604082611314565b51902091610716611355565b610e7d5761073b8560ff6001918060081c5f526002602052161b60405f205416151590565b610e515761074888611392565b97610756604051998a611314565b8852602401602088015b828210610e4157505050925f935b86518510156107b05761078185886113aa565b51908181101561079f575f52602052600160405f205b94019361076e565b905f52602052600160405f20610797565b85907f000000000000000000000000000000000000000000000000000000000000000003610e195760035464ffffffffff811615610de5575b50600454926107f784611392565b936108056040519586611314565b80855260045f9081527f8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b602087015b838310610da857505050505f845161084b81611392565b956108596040519788611314565b8187527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe061088683611392565b015f5b818110610d855750505f905b828210610c7c5750506fffffffffffffffffffffffffffffffff8216848111610c4f578411610bfc575b5050508360081c5f52600260205260405f20600160ff86161b815417905573ffffffffffffffffffffffffffffffffffffffff5f541692604051610902816112f8565b5f81525f60208201526040519161010083019583871067ffffffffffffffff881117610bcf5773ffffffffffffffffffffffffffffffffffffffff9660409492939452815260208101918583526040820185815260608301887f00000000000000000000000000000000000000000000000000000000000000001681528860808501917f0000000000000000000000000000000000000000000000000000000000000000151583526fffffffffffffffffffffffffffffffff60a08701947f00000000000000000000000000000000000000000000000000000000000000001515865260c0880196875260e08801998a526040519c8d997f897f362b000000000000000000000000000000000000000000000000000000008b52602060048c0152816101448c019a511660248c0152511660448a0152511660648801525116608486015251151560a485015251151560c4840152519061012060e48401528151809152602061016484019201905f5b818110610b91575050508190602080945173ffffffffffffffffffffffffffffffffffffffff815116610104850152015161012483015203815f73ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000165af1928315610b86575f93610b2e575b50907f28b58397e03322f670d6b223cc863f8c148e368b8b615412e6798a641a22842d60406020958594825191825287820152a3604051908152f35b939250906020843d602011610b7e575b81610b4b60209383611314565b810103126101095792519192907f28b58397e03322f670d6b223cc863f8c148e368b8b615412e6798a641a22842d610af2565b3d9150610b3e565b6040513d5f823e3d90fd5b825180516fffffffffffffffffffffffffffffffff16855260209081015164ffffffffff168186015289955060409094019390920191600101610a71565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6fffffffffffffffffffffffffffffffff91610c3b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff849301886113aa565b5193031681835116011690528480806108bf565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52600160045260245ffd5b9092610c9d67ffffffffffffffff610c9486856113aa565b515116876113eb565b6fffffffffffffffffffffffffffffffff8111610d5a576fffffffffffffffffffffffffffffffff8091169164ffffffffff6020610cdb88876113aa565b5101511660405190610cec826112f8565b8482526020820152610cfe878c6113aa565b52610d09868b6113aa565b5016016fffffffffffffffffffffffffffffffff8111610d2d579260010190610895565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b7f4916adce000000000000000000000000000000000000000000000000000000005f5260045260245ffd5b602090604051610d94816112f8565b5f81525f8382015282828c01015201610889565b600160208192604051610dba816112f8565b64ffffffffff865467ffffffffffffffff8116835260401c1683820152815201920192019190610834565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000164264ffffffffff1617600355846107e9565b7f0fa7d73c000000000000000000000000000000000000000000000000000000005f5260045ffd5b8135815260209182019101610760565b847f712b37a3000000000000000000000000000000000000000000000000000000005f5260045260245ffd5b7f442b1841000000000000000000000000000000000000000000000000000000005f524260045264ffffffffff7f00000000000000000000000000000000000000000000000000000000000000001660245260445ffd5b7f4557880f000000000000000000000000000000000000000000000000000000005f5260045260245ffd5b34610109575f6003193601126101095760206040517f000000000000000000000000000000000000000000000000000000000000000015158152f35b34610109575f6003193601126101095760206040517f000000000000000000000000000000000000000000000000000000000000000015158152f35b3461010957604060031936011261010957610f906112d5565b6024356fffffffffffffffffffffffffffffffff81168091036101095773ffffffffffffffffffffffffffffffffffffffff5f54163381036103dd575064ffffffffff6003541680151580611205575b806111f6575b61119c57506040515f8073ffffffffffffffffffffffffffffffffffffffff60208401957fa9059cbb00000000000000000000000000000000000000000000000000000000875216948560248501528460448501526044845261104a606485611314565b73ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001693519082855af13d15611190573d67ffffffffffffffff8111610bcf576110e891604051916110d860207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f8401160184611314565b82523d5f602084013e5b836114b8565b805190811515918261116c575b505061114157507f2e9d425ba8b27655048400b366d7b6a1f7180ebdb088e06bb7389704860ffe1f602073ffffffffffffffffffffffffffffffffffffffff5f541692604051908152a3005b7f5274afe7000000000000000000000000000000000000000000000000000000005f5260045260245ffd5b819250906020918101031261010957602001518015908115036101095784806110f5565b6110e8906060906110e2565b7f92b66697000000000000000000000000000000000000000000000000000000005f524260045264ffffffffff7f00000000000000000000000000000000000000000000000000000000000000001660245260445260645ffd5b506111ff611355565b15610fe6565b5062093a80810164ffffffffff8111610d2d5764ffffffffff164211610fe0565b34610109575f600319360112610109576104ca907f00000000000000000000000000000000000000000000000000000000000000006020820152602081526104be604082611314565b919091602081528251928360208301525f5b8481106112bf5750507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f845f6040809697860101520116010190565b8060208092840101516040828601015201611281565b6004359073ffffffffffffffffffffffffffffffffffffffff8216820361010957565b6040810190811067ffffffffffffffff821117610bcf57604052565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff821117610bcf57604052565b64ffffffffff7f000000000000000000000000000000000000000000000000000000000000000016801515908161138a575090565b905042101590565b67ffffffffffffffff8111610bcf5760051b60200190565b80518210156113be5760209160051b010190565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b9190917fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff838209838202918280831092039180830392146114a757670de0b6b3a7640000821015611477577faccb18165bd6fe31ae1cf318dc5b51eee0e1ba569b88cd74c1773b91fac106699394670de0b6b3a7640000910990828211900360ee1b910360121c170290565b84907f5173648d000000000000000000000000000000000000000000000000000000005f5260045260245260445ffd5b5050670de0b6b3a764000090049150565b906114f557508051156114cd57805190602001fd5b7f1425ea42000000000000000000000000000000000000000000000000000000005f5260045ffd5b81511580611548575b611506575090565b73ffffffffffffffffffffffffffffffffffffffff907f9996b315000000000000000000000000000000000000000000000000000000005f521660045260245ffd5b50803b156114fe56fea164736f6c634300081a000aa164736f6c634300081a000a";

    /*//////////////////////////////////////////////////////////////////////////
                                     DEPLOYERS
    //////////////////////////////////////////////////////////////////////////*/

    /// @notice Deploys {SablierV2BatchLockup} from precompiled bytecode.
    function deployBatchLockup() public returns (ISablierV2BatchLockup batchLockup) {
        bytes memory creationBytecode = BYTECODE_BATCH_LOCKUP;
        assembly {
            batchLockup := create(0, add(creationBytecode, 0x20), mload(creationBytecode))
        }
        require(
            address(batchLockup) != address(0), "Sablier V2 Precompiles: deployment failed for BatchLockup contract"
        );
    }

    /// @notice Deploys {SablierV2MerkleLockupFactory} from precompiled bytecode.
    function deployMerkleLockupFactory() public returns (ISablierV2MerkleLockupFactory factory) {
        bytes memory creationBytecode = BYTECODE_MERKLE_LOCKUP_FACTORY;
        assembly {
            factory := create(0, add(creationBytecode, 0x20), mload(creationBytecode))
        }
        require(
            address(factory) != address(0), "Sablier V2 Precompiles: deployment failed for MerkleLockupFactory contract"
        );
    }

    /// @notice Deploys all V2 Periphery contracts in the following order:
    ///
    /// 1. {SablierV2BatchLockup}
    /// 2. {SablierV2MerkleLockupFactory}
    function deployPeriphery()
        public
        returns (ISablierV2BatchLockup batchLockup, ISablierV2MerkleLockupFactory merkleLockupFactory)
    {
        batchLockup = deployBatchLockup();
        merkleLockupFactory = deployMerkleLockupFactory();
    }

    /// @notice Deploys the entire Sablier V2 Protocol from precompiled bytecode.
    ///
    /// 1. {SablierV2NFTDescriptor}
    /// 2. {SablierV2LockupDynamic}
    /// 3. {SablierV2LockupLinear}
    /// 4. {SablierV2LockupTranched}
    /// 5. {SablierV2BatchLockup}
    /// 6. {SablierV2MerkleLockupFactory}
    function deployProtocol(address initialAdmin)
        public
        returns (
            ISablierV2LockupDynamic lockupDynamic,
            ISablierV2LockupLinear lockupLinear,
            ISablierV2LockupTranched lockupTranched,
            ISablierV2NFTDescriptor nftDescriptor,
            ISablierV2BatchLockup batchLockup,
            ISablierV2MerkleLockupFactory merkleLockupFactory
        )
    {
        // Deploy V2 Core.
        (lockupDynamic, lockupLinear, lockupTranched, nftDescriptor) = new V2CorePrecompiles().deployCore(initialAdmin);

        // Deploy V2 Periphery.
        (batchLockup, merkleLockupFactory) = deployPeriphery();
    }
}
